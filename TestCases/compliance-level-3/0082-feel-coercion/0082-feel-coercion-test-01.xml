<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!-- Contributed to DMN TCK by StrayAlien -->
<testCases xmlns="http://www.omg.org/spec/DMN/20160719/testcase" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <modelName>0082-feel-coercion.dmn</modelName>
    <labels>
        <label>Compliance Level 3</label>
        <label>Feel : any</label>
        <label>FEEL TYpe Conformance</label>
    </labels>

    <testCase id="decision_001">
        <description>type mismatch - decision return value is null coerced</description>
        <resultNode name="decision_001" type="decision">
            <expected>
                <value xsi:nil="true"/>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="decision_002">
        <description>type permitted - any list</description>
        <resultNode name="decision_002" type="decision">
            <expected>
                <list>
                    <item>
                        <value xsi:type="xsd:decimal">1</value>
                    </item>
                    <item>
                        <value xsi:type="xsd:decimal">2</value>
                    </item>
                    <item>
                        <value xsi:type="xsd:string">foo</value>
                    </item>
                </list>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="decision_003">
        <description>list type mismatch - decision return value is null coerced</description>
        <resultNode name="decision_003" type="decision">
            <expected>
                <value xsi:nil="true"/>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="decision_004">
        <description>type permitted - conforming context</description>
        <resultNode name="decision_004" type="decision">
            <expected>
                <component name="name">
                    <value xsi:type="xsd:string">foo</value>
                </component>
                <component name="surname">
                    <value xsi:type="xsd:string">bar</value>
                </component>
                <component name="age">
                    <value xsi:type="xsd:decimal">10</value>
                </component>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="decision_005">
        <description>context type mismatch - decision return value is null coerced</description>
        <resultNode name="decision_005" type="decision">
            <expected>
                <value xsi:nil="true"/>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="decision_006">
        <description>decision returns value but type is list - coercion to list</description>
        <resultNode name="decision_006" type="decision">
            <expected>
                <list>
                    <item>
                        <value xsi:type="xsd:string">foo</value>
                    </item>
                </list>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="decision_006_a">
        <description>decision type is list but return val is non-conforming val - coercion to null</description>
        <resultNode name="decision_006_a" type="decision">
            <expected>
                <value xsi:nil="true"/>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="decision_007">
        <description>decision returns singleton list value but type is not a list - coercion list to val</description>
        <resultNode name="decision_007" type="decision">
            <expected>
                <value xsi:type="xsd:string">foo</value>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="decision_007_a">
        <description>decision type is value but return val is non-conforming singleton list - coercion to null</description>
        <resultNode name="decision_007_a" type="decision">
            <expected>
                <value xsi:nil="true"/>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="decision_008">
        <description>decision type is list but return val null - null cannot be coerced so no singleton list coercion</description>
        <resultNode name="decision_008" type="decision">
            <expected>
                <value xsi:nil="true"/>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="decision_bkm_001">
        <description>pass conforming context type to bkm</description>
        <resultNode name="decision_bkm_001" type="decision">
            <expected>
                <value xsi:type="xsd:boolean">true</value>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="decision_bkm_002">
        <description>pass non-conforming type to bkm - bkm
            input param is null coerced</description>
        <resultNode name="decision_bkm_002" type="decision">
            <expected>
                <value xsi:type="xsd:boolean">false</value>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="decision_bkm_003">
        <description>BKM logic returns non-conforming value to bkm variable typeRef - bk result is null coerced</description>
        <resultNode name="decision_bkm_003" type="decision">
            <expected>
                <value xsi:nil="true"/>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="decision_bkm_004">
        <description>bkm type is list and bkm logic returns conforming (non-list) value - coercion val to list</description>
        <resultNode name="decision_bkm_004" type="decision">
            <expected>
                <list>
                    <item>
                        <value xsi:type="xsd:decimal">10</value>
                    </item>
                </list>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="decision_bkm_004_a">
        <description>bkm type is list and bkm logic returns non-conforming (non-list) value - coercion to null</description>
        <resultNode name="decision_bkm_004_a" type="decision">
            <expected>
                <value xsi:nil="true"/>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="decision_bkm_004_b">
        <description>bkm type is list and bkm logic returns null - null cannot be coerced to result remains null</description>
        <resultNode name="decision_bkm_004_b" type="decision">
            <expected>
                <value xsi:nil="true"/>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="decision_bkm_005">
        <description>bkm type is non-list and bkm logic returns singleton list of conforming value - coercion list to val</description>
        <resultNode name="decision_bkm_005" type="decision">
            <expected>
                <value xsi:type="xsd:decimal">10</value>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="decision_bkm_005_a">
        <description>bkm type is non-list and bkm logic returns singleton list of non-conforming value - coercion to null</description>
        <resultNode name="decision_bkm_005_a" type="decision">
            <expected>
                <value xsi:nil="true"/>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="invoke_001">
        <description>decision has invocation call a bkm and passing invalid
            non-comforming context - null coercion of param into bkm</description>
        <resultNode name="invoke_001" type="decision">
            <expected>
                <value xsi:type="xsd:boolean">false</value>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="invoke_002">
        <description>decision has invocation of bkm passing valid param, but bkm return value
            does not match explicit type on invocation defn  - null coercion of result
            of invocation </description>
        <resultNode name="invoke_002" type="decision">
            <expected>
                <value xsi:nil="true"/>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="invoke_003">
        <description>invocation type is a list and invoked bkm returns single conforming value - coercion to list</description>
        <resultNode name="invoke_003" type="decision">
            <expected>
                <list>
                    <item>
                        <value xsi:type="xsd:decimal">10</value>
                    </item>
                </list>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="invoke_004">
        <description>invocation type is a list and invoked bkm returns single non-conforming value - coercion to null</description>
        <resultNode name="invoke_004" type="decision">
            <expected>
                <value xsi:nil="true"/>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="invoke_005">
        <description>invocation type is a non-list and invoked bkm returns singleton array of conforming value - coercion to value</description>
        <resultNode name="invoke_005" type="decision">
            <expected>
                <value xsi:type="xsd:decimal">10</value>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="invoke_006">
        <description>invocation type is a non-list and invoked bkm returns singleton array of non-conforming value - coercion to null</description>
        <resultNode name="invoke_006" type="decision">
            <expected>
                <value xsi:nil="true"/>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="fd_001">
        <description>function definition has typed param and is passed a conforming type - no coercion</description>
        <resultNode name="fd_001" type="decision">
            <expected>
                <value xsi:type="xsd:decimal">10</value>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="fd_002">
        <description>function definition has typed param and is passed non-conforming type - coercion to null</description>
        <resultNode name="fd_002" type="decision">
            <expected>
                <value xsi:nil="true"/>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="literal_001">
        <description>literal expression has typeRef and result is conforming value - no coercion</description>
        <resultNode name="literal_001" type="decision">
            <expected>
                <value xsi:type="xsd:decimal">10</value>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="literal_002">
        <description>literal expression has typeRef and result is non-conforming value - coercion to null</description>
        <resultNode name="literal_002" type="decision">
            <expected>
                <value xsi:nil="true"/>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="literal_003">
        <description>literal expression has list typeRef and result is conforming value - coercion to list</description>
        <resultNode name="literal_003" type="decision">
            <expected>
                <list>
                    <item>
                        <value xsi:type="xsd:decimal">10</value>
                    </item>
                </list>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="literal_004">
        <description>literal expression has list typeRef and result is non-conforming value - coercion to null</description>
        <resultNode name="literal_004" type="decision">
            <expected>
                <value xsi:nil="true"/>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="literal_005">
        <description>literal expression has non-list typeRef and result is conforming singleton list - coercion to value</description>
        <resultNode name="literal_005" type="decision">
            <expected>
                <value xsi:type="xsd:decimal">10</value>
            </expected>
        </resultNode>
    </testCase>

    <testCase id="literal_006">
        <description>literal expression has non-list typeRef and result is non-conforming singleton list - coercion to null</description>
        <resultNode name="literal_006" type="decision">
            <expected>
                <value xsi:nil="true"/>
            </expected>
        </resultNode>
    </testCase>

</testCases>
